<script>
  document.getElementById('predictionForm').addEventListener('submit', function(e) {
    e.preventDefault();

    // Retrieve input values
    const troopId = document.getElementById('troopSelect').value;
    const numGirls = document.getElementById('numberOfGirls').value;

    // Adjust the URL if your Flask app is hosted on a different domain or port.
    fetch('http://localhost:5000/predict', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        troop_id: troopId,
        number_of_girls: numGirls
      })
    })
    .then(response => response.json())
    .then(data => {
      if (data.error) {
        document.getElementById('result').innerHTML = `<p>Error: ${data.error}</p>`;
      } else {
        let resultHtml = `<h2>Prediction for ${data.troop_id}</h2>`;
        data.predictions.forEach(pred => {
          resultHtml += `<p>Cookie Type: ${pred.cookie_type} - Predicted Cases: ${pred.predicted_cases}</p>`;
        });
        document.getElementById('result').innerHTML = resultHtml;
      }
    })
    .catch(error => {
      console.error('Error:', error);
      document.getElementById('result').innerHTML = `<p>Error processing prediction.</p>`;
    });
  });
</script>
